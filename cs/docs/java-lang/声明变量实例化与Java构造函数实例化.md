## 1. 概述

Java 开发人员不确定是在声明变量时还是在构造函数中初始化变量。

在本教程中，我们将看看当我们在声明或构造函数中初始化变量时会发生什么。如果它们存在，我们将尝试指出它们之间的一些差异和相似之处。

## 2.字段声明初始化

我们需要知道，Java 编译器会取出所有字段声明初始化，并按照它们在类中出现的顺序将它们作为代码移动到构造函数中。由此，我们可以推断出 在声明中或在构造函数中初始化变量之间没有太大区别，因为在编译之后，它们无论如何都会在构造函数中结束：

```java
public class A {
    private B b = new B();
}
```

## 3.构造函数字段初始化

从我们上面的代码，编译后，我们最终得到这个构造函数：

```java
public class A {
    private B b;

    public A() {
        this.b = new B();
    }
}
```

那么我们在哪里初始化数据重要吗？

在知道编译之后会发生什么之后，就不那么多了。这更像是我们倾向于根据我们的经验形成的偏好。

## 4. 指南

在决定是在字段声明处还是在构造函数中初始化数据时，我们可以参考一些指南。

这是一个依赖注入构造函数：

```java
public A(B b) {
    this.b = b;
}
```

一种推荐的初始化变量的方法是使用依赖注入。通过使用这种初始化对象的方式，我们遵循不同的原则。

### 4.1. 可读性

为了让我们有更好的可读性，在字段声明或构造函数中初始化数据可能很重要，而不是两者。当然，我们应该以此为指导，而不是作为规则，因为你可以两者兼得。

将所有初始化都放在一个地方可以更容易地知道在哪里寻找初始化代码。这将使任何未来的开发人员更容易只在一个地方查看初始化，而不是分散在多个地方。

### 4.2. 单一职责

通过使用依赖注入构造函数，我们从A类中删除了实例化B对象的责任。在可能的情况下，遵循单一责任 原则总是更可取的。

这也意味着我们将有较低的类之间的耦合，这是另一个值得遵循的很棒的指导方针。

### 4.3. 可测试性

使用这个构造函数往往有更简单的方法来测试我们的代码，因为我们可以轻松地模拟我们的B对象，然后使用这个构造函数将它注入到我们的 A 对象中：

```java
B b = mock(B.class);
A a = new A(b);
```

### 4.4. 可维护性

具有较低的耦合类也为我们带来了更好的代码可维护性。因此，我们将能够更轻松地修改代码。

## 5.总结

在本文中，我们已经看到使用字段声明或构造函数初始化更像是一种偏好，它们之间的一些差异可能是我们想要遵循的设计原则。

使用构造函数初始化和依赖注入可以给我们一些设计原则上的优势。