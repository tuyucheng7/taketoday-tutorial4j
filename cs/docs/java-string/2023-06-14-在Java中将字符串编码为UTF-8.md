---
layout: post
title:  使用Selenium处理浏览器选项卡
category: java-string
copyright: java-string
excerpt: Java String
---

## 1. 概述

在Java中处理String时，我们有时需要将它们编码为特定的字符集。

本教程是一个实用指南，展示了将字符串编码为UTF-8字符集的不同方法。

如需更深入的技术研究，请参阅我们[的字符编码指南](https://www.tuyucheng.com/java-char-encoding)。

## 2. 定义问题

为了展示Java编码，我们将使用德语字符串“EntwickelnSiemitVergnügen”：

```java
String germanString = "Entwickeln Sie mit Vergnügen";
byte[] germanBytes = germanString.getBytes();

String asciiEncodedString = new String(germanBytes, StandardCharsets.US_ASCII);

assertNotEquals(asciiEncodedString, germanString);
```

这个使用US_ASCII编码的字符串在打印时为我们提供了值“EntwickelnSiemitVergn?gen”，因为它不理解非ASCIIü字符。

但是当我们将使用所有英文字符的ASCII编码字符串转换为UTF-8时，我们得到相同的字符串：

```java
String englishString = "Develop with pleasure";
byte[] englishBytes = englishString.getBytes();

String asciiEncondedEnglishString = new String(englishBytes, StandardCharsets.US_ASCII);

assertEquals(asciiEncondedEnglishString, englishString);
```

让我们看看当我们使用UTF-8编码时会发生什么。

## 3. 使用CoreJava编码

让我们从核心库开始。

String在Java中是不可变的，这意味着我们无法更改String字符编码。为了实现我们想要的，我们需要字符串的字节，然后创建一个具有所需编码的新字节。

首先，我们获取String字节，然后使用检索到的字节和所需的字符集创建一个新字节：

```java
String rawString = "Entwickeln Sie mit Vergnügen";
byte[] bytes = rawString.getBytes(StandardCharsets.UTF_8);

String utf8EncodedString = new String(bytes, StandardCharsets.UTF_8);

assertEquals(rawString, utf8EncodedString);
```

## 4. 使用Java 7StandardCharsets编码

或者，我们可以使用Java 7中引入的StandardCharsets类来对String进行编码。

首先，我们将字符串解码为字节，其次，我们将字符串编码为UTF-8：

```java
String rawString = "Entwickeln Sie mit Vergnügen";
ByteBuffer buffer = StandardCharsets.UTF_8.encode(rawString); 

String utf8EncodedString = StandardCharsets.UTF_8.decode(buffer).toString();

assertEquals(rawString, utf8EncodedString);
```

## 5. 使用Commons-Codec编码

除了使用核心Java，我们还可以使用[Apache Commons Codec](https://commons.apache.org/proper/commons-codec/)来达到相同的效果。

Apache Commons Codec是一个方便的包，包含用于各种格式的简单编码器和解码器。

首先，让我们从项目配置开始。

使用Maven时，我们必须将[commons-codec依赖](https://search.maven.org/search?q=g:commons-codecANDa:commons-codec)项添加到我们的pom.xml中：

```xml
<dependency>
    <groupId>commons-codec</groupId>
    <artifactId>commons-codec</artifactId>
    <version>1.14</version>
</dependency>
```

然后，在我们的例子中，最有趣的类是[StringUtils](https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/StringUtils.html)，它提供了对String进行编码的方法。

使用此类，获取UTF-8编码的字符串非常简单：

```java
String rawString = "Entwickeln Sie mit Vergnügen"; 
byte[] bytes = StringUtils.getBytesUtf8(rawString);
 
String utf8EncodedString = StringUtils.newStringUtf8(bytes);

assertEquals(rawString, utf8EncodedString);
```

## 6. 总结

将字符串编码为UTF-8并不困难，但不是那么直观。本文介绍了三种方法，使用核心Java或Apache Commons Codec。
与往常一样，本教程的完整源代码可在[GitHub](https://github.com/tu-yucheng/taketoday-tutorial4j/tree/master/java-core-modules/java-string-algorithms-1)上获得。
