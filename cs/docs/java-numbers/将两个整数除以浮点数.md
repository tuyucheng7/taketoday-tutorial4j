## 1. 概述

在Java中，我们可以使用[除法运算符](https://www.baeldung.com/java-operators#4-the-division-operator)(/) 将左侧值除以右侧值。例如，int number = 10 / 5。

在本快速教程中，我们将探讨如何从整数除法运算中获取浮点数结果。

## 二、问题简介

首先，为简单起见，我们将使用单元测试断言来验证本教程中的计算结果。

我们可能已经意识到，当我们将除法运算符应用于两个整数(如a/b)时，它总是返回一个整数，即使a不能被b整除，例如：

```java
int i = 10 / 4;
assertEquals(2, i);

```

如果我们运行测试，它就会通过。因此，10 / 4产生 2 而不是2.5。而且，即使我们把计算结果赋值给一个 float变量，结果还是两个：

```java
float x = 10 / 4;
assertEquals(2, x);

```

那么接下来，让我们先了解为什么会出现这种情况，然后弄清楚如何获得所需的浮点数结果，例如本例中的 2.5。

## 3. 为什么在Java中两个整数相除总是得到一个整数？

要理解为什么 10 / 4 = 2 在Java中，我们需要查看 JLS(Java 语言规范)中的[除法运算符部分](https://docs.oracle.com/javase/specs/jls/se11/html/jls-15.html#jls-15.17.2)以了解除法运算符的行为是如何定义的。

首先，规范指出整数除法向零舍入。也就是说，两个整数相除运算的结果只是商值。其余不包括在内。

因此，当我们计算10 / 4时，我们得到 2 而不是 2.5。

接下来，让我们看看如果两个整数不可整除，如何得到预期的浮点数结果。

## 4. 如何使两个整数相除得到浮点数？

现在，我们已经了解了除法运算符如何处理两个整数。[JLS 在Binary numeric promotion](https://docs.oracle.com/javase/specs/jls/se11/html/jls-5.html#jls-5.6.2)中也定义了原始操作数转换规则。

对、/和%运算符执行二进制数字提升。因此，除法运算遵循操作数转换规则。

那么接下来，让我们仔细看看操作数转换规则。

根据 JLS，当我们计算a/b时：

-   如果其中一个操作数是双精度类型，则另一个将转换为双精度。
-   否则，如果任一操作数的类型为float，则另一个将转换为float。
-   否则，如果其中一个操作数是long 类型，则另一个将转换为long。
-   否则，两个操作数都转换为int 类型。

根据上面的规则，如果我们想让a/b运算的结果是一个 浮点数，至少有一个操作数是 浮点类型的。 

那么，接下来，让我们看看将一个操作数转换为float时是否能得到预期的结果：

```java
float x = (float) 10 / 4;
assertEquals(2.5, x);

float y = 10 / (float) 8;
assertEquals(1.25, y);

```

如果我们运行上面的测试，它就会通过。因此，将任何操作数转换为float会使除法产生float结果。

## 5.总结

在这篇简短的文章中，我们讨论了为什么在Java中整数除法总是得到整数。

此外，我们已经解决了如何从整数除法中获得预期的浮点数结果。这对于不可分割的情况特别有用。